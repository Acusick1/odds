experiment:
  name: xgboost_feature_selection_h2h
  tags:
  - xgboost
  - feature_selection
  - h2h
  - tuning
  description: 'XGBoost model with integrated feature selection and top_k_features
    tuning.

    Uses ensemble feature selection method to rank features, then tunes the

    number of features to use alongside other hyperparameters.

    '
training:
  strategy_type: xgboost_line_movement
  data:
    start_date: '2024-10-01'
    end_date: '2024-12-31'
    test_split: 0.2
    validation_split: 0.1
    random_seed: 42
    shuffle: true
    use_kfold: true
    cv_method: timeseries
    n_folds: 5
  model:
    n_estimators: 100
    max_depth: 6
    learning_rate: 0.1
    min_child_weight: 1
    gamma: 0.0
    subsample: 0.8
    colsample_bytree: 0.8
    reg_alpha: 0.0
    reg_lambda: 1.0
    objective: reg:squarederror
    random_state: 42
    n_jobs: -1
    early_stopping_rounds: 10
  features:
    adapter: xgboost
    sharp_bookmakers:
    - pinnacle
    retail_bookmakers:
    - fanduel
    - draftkings
    - betmgm
    markets:
    - h2h
    - spreads
    - totals
    outcome: home
    normalize: false
    feature_groups:
    - tabular
    - trajectory
    sampling:
      strategy: tier
      decision_tier: pregame
  feature_selection:
    enabled: true
    method: ensemble
    n_ensemble_models: 3
    ensemble_seeds:
    - 42
    - 123
    - 456
    model_types:
    - xgboost
    - random_forest
    - extra_trees
    min_correlation: 0.02
    min_variance: 0.01
    hybrid_filter_weight: 0.3
  output_path: models
tuning:
  n_trials: 50
  timeout: null
  direction: minimize
  metric: val_mse
  pruner: median
  sampler: tpe
  search_spaces:
    n_estimators:
      type: int
      low: 50
      high: 300
      step: 50
    max_depth:
      type: int
      low: 3
      high: 10
    learning_rate:
      type: float
      low: 0.01
      high: 0.3
      log: true
    subsample:
      type: float
      low: 0.6
      high: 1.0
      step: 0.1
    colsample_bytree:
      type: float
      low: 0.6
      high: 1.0
      step: 0.1
    reg_alpha:
      type: float
      low: 0.0
      high: 1.0
    reg_lambda:
      type: float
      low: 0.0
      high: 2.0
    top_k_features:
      type: int
      low: 5
      high: 40
      step: 1
tracking:
  enabled: true
  backend: mlflow
  tracking_uri: mlruns
  experiment_name: xgboost_feature_selection_experiments
  log_model: true
  log_params: true
  log_metrics: true
